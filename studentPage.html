<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Student Home Page</title>
    <link rel="stylesheet" href="projectStyle.css" />
  </head>
  <body>
    <h1>
      Welcome, <span id="displayName"></span>
      <button id="manageYourAccount" type="button">Manage Your Account</button>
    </h1>
    <h2>Rooms and Available Time Slots</h2>
    <label for="dateInput">Date</label> <br />
    <input id="dateInput" type="date" /> <br />

    <label for="list1">Study Room A</label> <br />
    <select id="list1"></select
    ><br />

    <label for="list2">Computer Lab B</label> <br />
    <select id="list2"></select
    ><br />

    <label for="list3">Study Room B</label> <br />
    <select id="list3"></select
    ><br />

    <input type="submit" id="Book" value="Book" />

    <!--
    <ul>
      <li>
        <strong>Study Room A</strong>
        <ul>
          <li>2:00 PM-3:00 Pm <button class = "primaryButton" onclick="book('Study Room A', '2:00 PM')">Book</button></li>
          <li>3:00 PM-4:00PM <button class = "primaryButton" onclick="book('Study Room A', '3:00 PM')">Book</button></li>
          <li>5:00 PM-6:00PM <button class = "primaryButton" onclick="book('Study Room A', '3:00 PM')">Book</button></li>
        </ul>
      </li>

      <li>
        <strong>Computer Lab B</strong>
        <ul>
          <li>1:00-3:30 PM PM <button class = "primaryButton" onclick="book('Computer Lab B', '4:00 PM')">Book</button></li>
          <li>4:00-6:30 PM PM <button class = "primaryButton" onclick="book('Computer Lab B', '4:00 PM')">Book</button></li>
          <li>6:30-8:00 PM <button class = "primaryButton" onclick="book('Computer Lab B', '5:00 PM')">Book</button></li>

        </ul>
      </li>

      <li>
        <strong>Study Room B</strong>
        <ul>
          <li>12:00 PM-1:00 PM <button class = "primaryButton" onclick="book('Study Room B', '1:00 PM')">Book</button></li>
          <li>1:00 PM -2:00 PM<button class = "primaryButton" onclick="book('Study Room B', '1:00 PM')">Book</button></li>
          <li>2:00 PM - 3:00 PM<button class ="primaryButton" click="book('Study Room B', '2:00 PM')">Book</button></li>
        </ul>
      </li>
    </ul> 
    
-->
    <script>
      document
        .getElementById("manageYourAccount")
        .addEventListener("click", function () {
          location.href = "managingAccountStudent.html";
        });
      class TimeSlot {
        constructor(time, status) {
          this.time = time;
          this.status = status;
        }
      }

      class Room {
        constructor(name) {
          this.name = name;
          this.slots = []; // each room would have an array of TimeSlot objects
        }

        addTimeSlot(time, status) {
          this.slots.push(new TimeSlot(time, status));
        }

        findAvailableStatus() {
          return this.slots.filter((s) => s.status === "available");
        }
      }

      class Day {
        constructor(date) {
          this.date = date;
          this.rooms = [];
        }

        addRoom(room) {
          this.rooms.push(room);
        }
        getRoom(name) {
          return this.rooms.find((r) => r.name === name);
        }
      }
      const days = new Map();

      const oct_19_25 = new Day("2025-10-19");
      // Study Room A for october 19 2025
      const oct_19_studyroomA = new Room("Study Room A");
      oct_19_studyroomA.addTimeSlot("14h00-15h00", "available");
      oct_19_studyroomA.addTimeSlot("15h00-16h00", "available");
      oct_19_studyroomA.addTimeSlot("16h00-17h00", "available");
      oct_19_25.addRoom(oct_19_studyroomA);
      // Computer Lab B for october 19 2025
      const oct_19_computerlabB = new Room("Computer Lab B");
      oct_19_computerlabB.addTimeSlot("14h00-15h00", "available");
      oct_19_computerlabB.addTimeSlot("15h00-16h00", "available");
      oct_19_computerlabB.addTimeSlot("16h00-17h00", "available");
      oct_19_25.addRoom(oct_19_computerlabB);

      // Study Room B for October 19th
      const oct_19_studyroomB = new Room("Study Room B");
      oct_19_studyroomB.addTimeSlot("14h00-15h00", "available");
      oct_19_studyroomB.addTimeSlot("15h00-16h00", "available");
      oct_19_studyroomB.addTimeSlot("16h00-17h00", "available");
      oct_19_25.addRoom(oct_19_studyroomB);

      days.set(oct_19_25.date, oct_19_25);

      const daySelected = document.getElementById("dateInput");
      const list1 = document.getElementById("list1"); // Study Room A
      const list2 = document.getElementById("list2"); // Computer Lab B
      const list3 = document.getElementById("list3"); // Study Room B

      daySelected.addEventListener("change", () => {
        const daySelectedString = daySelected.value;
        const d = days.get(daySelectedString);

        const roomA = d.getRoom("Study Room A").findAvailableStatus();
        for (let i = 0; i < roomA.length; i++) {
          const op1 = document.createElement("option");
          op1.value = roomA[i].time; // machine value
          op1.textContent = roomA[i].time; // what user sees
          list1.appendChild(op1);
        }
        list1.size = roomA.length;
        const labB = d.getRoom("Computer Lab B").findAvailableStatus();
        for (let i = 0; i < labB.length; i++) {
          const op2 = document.createElement("option");
          op2.value = labB[i].time; // machine value
          op2.textContent = labB[i].time; // what user sees
          list2.appendChild(op2);
        }
        list2.size = labB.length;
        const roomB = d.getRoom("Study Room B").findAvailableStatus();
        for (let i = 0; i < roomB.length; i++) {
          const op3 = document.createElement("option");
          op3.value = roomB[i].time; // machine value
          op3.textContent = roomB[i].time; // what user sees
          list3.appendChild(op3);
        }
        list3.size = labB.length;
      });

      /*
        const date=document.getElementById(dateInput);
    date.addEventListener("change",)
      // Get saved username or use "Student"
      const username = localStorage.getItem("username") || "Student";
      document.getElementById("displayName").textContent = username;

      // Simple booking message
      function book(resource, time) {
        alert("You booked " + resource + " at " + time + "!");}
        // Later we can link this to the manage bookings page
    */
    </script>
  </body>
</html>
